<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>
			{% block title %}Welcome!
			{% endblock %}
		</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
		<link
		rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
		{# Run `composer require symfony/webpack-encore-bundle` to start using Symfony UX #}
		{% block stylesheets %}
			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
			<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
			<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;700&display=swap" rel="stylesheet">

			{{ encore_entry_link_tags('app') }}
		{% endblock %}

		{% block javascripts %}
			<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
			{{ encore_entry_script_tags('app') }}
		{% endblock %}
	</head>

	<body>

		<style>

			body {
				font-family: 'Josefin Sans', sans-serif;
			}


			/* CSS of navbar */
			.logo img {
				height: 40px;
			}

			.spacer {
				flex: 1;
			}

			.icon-navbar {
				margin: 0 8px;
			}

			.panier-count {
				padding: 8px 16px;
				font-weight: bold;
				color: white;
			}

			.menu-header {
				padding: 8px 16px;
				font-weight: bold;
			}


			.nav-link {
				display: flex;
				align-items: center;
			}

			.icon-container {
				position: relative;
				margin-right: 10px;
				/* Add some margin to the right of the icon */
			}

			.circle-green {
				display: inline-block;
				width: 10px;
				height: 10px;
				background-color: rgb(35, 215, 35);
				border-radius: 50%;
				position: absolute;
				bottom: 5px;
				right: -5px;
			}


			.circle-gray {
				display: inline-block;
				width: 10px;
				height: 10px;
				background-color: gray;
				border-radius: 50%;
				position: absolute;
				bottom: 5px;
				right: -5px;
			}

			.circle-red {
				position: absolute;
				top: -8px;
				right: -14px;
				width: 20px;
				height: 20px;
				border-radius: 50%;
				background-color: #E7414D;
				text-align: center;
				line-height: 20px;
				font-size: 12px;
				color: white;
				font-weight: bold;
				display: inline-block;
			}


			.my-navbar {
				list-style-type: none;
				padding-left: 0;
			}

			.my-navbar .nav-item {
				margin-right: 20px;
			}


			.my-navbar a.nav-link,
			.my-navbar button.mat-button {
				cursor: pointer;
			}


			.navbar {
				background-color: #491C52;
				box-shadow: 1px 4px 10px rgba(0, 0, 0, 0.4);
				z-index: 999;
			}

			.navbar a,
			.navbar button {
				color: #FFF;
			}

			.navbar .nav-item a,
			.navbar .nav-item button {
				color: #FFF;
			}

			.navbar .nav-item a mat-icon,
			.navbar .nav-item button mat-icon {
				color: #FFF;
			}


			.navbar a:hover,
			.navbar button:hover {
				color: #D1C522;
			}

			.navbar .nav-item a:hover,
			.navbar .nav-item button:hover {
				color: #D1C522;
			}

			.navbar .nav-item a:hover mat-icon,
			.navbar .nav-item button:hover mat-icon {
				color: #D1C522;
			}

			/* CSS of footer */
			footer {
				margin-top: auto;
			}
		</style>

		<div class="index">

			<nav class="navbar navbar-expand-lg navbar-light sticky-top p-3">
				<div class="container-fluid">
					<a href="{{ path('app_default') }}" class="navbar-brand d-none d-lg-block"><img src="{{ asset('images/logo.png') }}" alt="" width="34px"></a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
						<ul class="navbar-nav me-auto mb-2 mb-lg-0">
							<li class="nav-item">
								<a href="{{ path('app_default') }}" class="nav-link">Home</a>
							</li>
							<li class="nav-item">
								<a href="{{ path('app_categories') }}" class="nav-link">Collections</a>
							</li>
							<li class="nav-item">
								<a href="{{ path('app_products') }}" class="nav-link">Products</a>
							</li>
							<li class="nav-item">
								<a href="#" class="nav-link">Offers</a>
							</li>
						</ul>
					</div>
					<div class="d-flex">
						<ul class="d-flex mb-2 mb-lg-0 my-navbar">
							<li class="nav-item mx-3">
								<a href="#" class="nav-link">

									<i class="fas fa-store"></i>
								</a>
							</li>
							<li class="nav-item mx-3">
								<a href="#" class="nav-link">
									<i class="fas fa-user"></i>
								</a>
							</li>
							<li class="nav-item mx-3">
								<a href="{{ path('app_cart') }}" class="nav-link">
									<i class="fas fa-shopping-cart"></i>
								</a>
							</li>

						</ul>
					</div>
				</div>
			</nav>
		</div>

		{% block body %}{% endblock %}


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('.ajax-form').on('submit', function(e) {
            e.preventDefault();
            let $form = $(this);
            $.post($form.attr('action'), $form.serialize(), function(response) {
                if (response.success) {
                    location.reload();
                } else {
                    alert('An error occurred!');
                }
            });
        });
    });

	  function adjustQuantity(action, productId) {
        let url = (action === 'increment') ? '/cart/increment/' + productId : '/cart/decrement/' + productId;
        
        fetch(url, {method: 'POST'})
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    location.reload();
                } else {
                    alert(data.message);
                }
            });
    }

    function removeFromCart(productId) {
        fetch('/cart/remove/' + productId, {method: 'POST'})
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    location.reload();
                } else {
                    alert(data.message);
                }
            });
    }

    function clearCart() {
        fetch('/cart/clear', {method: 'POST'})
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    location.reload();
                } else {
                    alert(data.message);
                }
            });
    }
</script>

	</body>
</html>
